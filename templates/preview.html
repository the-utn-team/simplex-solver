<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Vista Previa - Simplex Solver</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>Simplex Solver</h1>
        <p class="subtitle">Vista previa del problema ingresado</p>

        <div class="preview-box">
            <h3>Funci√≥n objetivo</h3>
            <div class="preview-text">
                {{ problem_data['funcion_objetivo']['type'] | capitalize }}:
                Z =
                {% for var, coef in problem_data['funcion_objetivo']['coefficients'].items() %}
                    {% set coef_rounded = coef|round(2) %}
                    {% if loop.first %}
                        {% if coef_rounded >= 0 %}
                            {{ coef_rounded }}{{ var }}
                        {% else %}
                            -{{ (-coef_rounded) }}{{ var }}
                        {% endif %}
                    {% else %}
                        {% if coef_rounded >= 0 %}
                            + {{ coef_rounded }}{{ var }}
                        {% else %}
                            - {{ (-coef_rounded) }}{{ var }}
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </div>

            <h3>Restricciones</h3>
            <div class="preview-text">
                {% for restriccion in problem_data['restricciones'] %}
                    {% for var, coef in restriccion['coefficients'].items() %}
                        {% set coef_rounded = coef|round(2) %}
                        {% if loop.first %}
                            {% if coef_rounded >= 0 %}
                                {{ coef_rounded }}{{ var }}
                            {% else %}
                                -{{ (-coef_rounded) }}{{ var }}
                            {% endif %}
                        {% else %}
                            {% if coef_rounded >= 0 %}
                                + {{ coef_rounded }}{{ var }}
                            {% else %}
                                - {{ (-coef_rounded) }}{{ var }}
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                    {{ restriccion['operator'] }} {{ restriccion['rhs'] }}<br>
                {% endfor %}
            </div>
        </div>

        <div class="button-grofup">
            <form action="{{ url_for('ui.solve_problem') }}" method="POST" style="display:inline;">
                <button type="submit" class="btn-submit">Resolver Problema</button>
            </form>
            <a class="btn btn-secondary" href="{{ url_for('ui.' + from_page + '_problem') }}">Volver</a>
        </div>
    </div>
</body>
</html>